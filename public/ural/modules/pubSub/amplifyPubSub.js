// Generated by CoffeeScript 1.6.2
(function() {
  define(function() {
    var _once_subs;

    _once_subs = {};
    return {
      pub: function(target, topic, data) {
        return amplify.publish("" + target + "_" + topic, data);
      },
      sub: function(target, topic, once, callback) {
        var name, s;

        if ($.isFunction(once)) {
          callback = once;
          once = false;
        }
        name = "" + target + "_" + topic;
        if (once) {
          s = _once_subs[name];
          if (s) {
            amplify.unsubscribe(name, s);
          }
          _once_subs[name] = callback;
        }
        return amplify.subscribe(name, callback);
      }
    };
  });

}).call(this);
