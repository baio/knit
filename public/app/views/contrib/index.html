<div xmlns="http://www.w3.org/1999/html">

    <div class="widget wviolet" id="_body">

        <div class="widget-head">
            <div class="pull-left" data-bind="with: contrib"><a href="#" data-bind="text: name, click: startUpdate"
                                                                style="color: mediumturquoise"></a>&nbsp;//<span
                    style="font-size: 12px"> 21 марта 2013</span></div>
            <div class="clearfix"></div>
            <div class="pull-left" style="font-size: 12px">Описание набора данных здесь</div>
            <div class="widget-icons pull-right" style="margin-top: -20px">
                <button type="submit" class="btn  btn-large btn-info" data-bind="click: startCreate">Добавить</button>
            </div>
            <div class="clearfix"></div>
        </div>

        <div class="widget-content">

            <table class="table">
                <thead>
                <tr>
                    <th>Имя 1</th>
                    <th>Cвязь</th>
                    <th>Имя 2</th>
                </tr>
                <!--
                <tr data-bind="template: {name: 'contrib-append-item-template', data: editItem}" class="row-input" id="append_row"></tr>
                </thead>
                -->
                <tbody id="items_list" data-bind="template: { name: 'contrib-item-row-template', foreach: list}">
                </tbody>
            </table>

        </div>

    </div>

</div>

<script type="text/html" id="contrib-item-row-template">
    <tr>
        <td>
            <span data-bind="text: name_1"></span>
        </td>
        <td data-bind="foreach: relations">
            <span class="badge badge-info" data-bind="text: val"></span>
        </td>
        <td>
            <span data-bind="text: name_2"></span>
        </td>
    </tr>
</script>

<div class="modal hide fade" data-form-type='update' data-form-resource='contrib'>
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Набор данных</h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal">
            <div class="control-group">
                <label class="control-label" for="inputName">Имя</label>

                <div class="controls">
                    <div class="help-inline error-message-inline" data-bind="validationMessage: name"
                         style="display: none;"></div>
                    <input type="text" id="inputName" data-bind="value: name">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputUrl">Ссылка</label>

                <div class="controls">
                    <div class="help-inline error-message-inline" data-bind="validationMessage: url"
                         style="display: none;"></div>
                    <input type="text" id="inputUrl" data-bind="value: url">
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-bind="click: cancel">Закрыть</a>
        <a href="#" class="btn btn-primary" data-bind="click: save">Сохранить</a>
    </div>
</div>

<div class="modal hide fade" data-form-type='create' data-form-resource='contrib-item'>
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Новая связь</h3>
    </div>
    <div class="modal-body">
        <form class="form">
            <div class="control-group">
                <div class="help-inline error-message-inline" data-bind="validationMessage: url"></div>
                <div class="controls controls-row">
                    <select id="create_scheme" data-bind="options: _availableTypes,
                optionsValue: function(item) {return item.id;},
                optionsText: function(item) {return item.label;},
                optionsCaption: 'Тип связи...', value: _selectedType">
                    </select>
                    <input type="text" id="url" data-bind="value: url, disable: _readOnly" placeholder="Ссылка">
                </div>
            </div>
            <div class="control-group">
                <!--<label class="control-label" for="create_name_1">Имя 1</label>-->
                <div class="help-inline error-message-inline" data-bind="validationMessage: name_1"></div>
                <div class="help-inline error-message-inline" data-bind="validationMessage: name_2"></div>
                <div class="controls controls-row">
                    <input type="text" id="create_name_1" data-bind="autocompleteWithScheme: name_1,
                     autocompleteOpts : {url: '/index', scheme : _index._scheme().name_1}, disable: _readOnly" placeholder="Имя 1">
                    <input type="text" id="create_name_2" data-bind="autocompleteWithScheme: name_2,
                     autocompleteOpts : {url: '/index', scheme : _index._scheme().name_2}, disable: _readOnly" placeholder="Имя 2">
                </div>
            </div>
            <div class="control-group">
                <!--<label class="control-label" for="create_relations">Связи</label>-->

                <div class="help-inline error-message-inline" data-bind="validationMessage: relations"></div>
                <div class="controls controls-row">
                    <input id="create_relations" name="create_relations" class="tm-input tm-input-small" type="text"
                        data-bind="tageditWithScheme: relations, tageditOpts : {url: '/index', scheme : _index._scheme().relations}, disable: _readOnly" placeholder="Связь">
                    </input>
                </div>

            </div>
            <!--
            <div class="control-group">
                <label class="control-label" for="create_name_2">Имя 2</label>

                <div class="controls">
                    <div class="help-inline error-message-inline" data-bind="validationMessage: name_2"
                         style="display: none;"></div>
                    <input type="text" id="create_name_2" data-bind="autocompleteWithScheme: name_2,
                     autocompleteOpts : {url: '/index', scheme : _index._scheme().name_2}">
                </div>
            </div>
            -->
            <div class="control-group">
                <!--<label class="control-label" for="date">Дата</label>-->
                <div class="help-inline error-message-inline" data-bind="validationMessage: date"></div>
                <div class="help-inline error-message-inline" data-bind="validationMessage: dateTo"></div>
                <div class="controls controls-row">
                    <input type="text" id="date" data-bind="datetime: date, disable: _readOnly" placeholder="Дата">
                    <input type="text" id="dateTo" data-bind="datetime: dateTo, disable: _readOnly" placeholder="Дата по">
                </div>
            </div>
            <!--
            <div class="control-group">
                <label class="control-label" for="dateTo">Дата по</label>

                <div class="controls">
                    <div class="help-inline error-message-inline" data-bind="validationMessage: dateTo"
                         style="display: none;"></div>
                    <input type="text" id="dateTo" data-bind="datetime: date">
                </div>
            </div>
            -->
            <!--
            <div class="control-group">
                <label class="control-label" for="url">Ссылка</label>
                <div class="controls">
                    <div class="help-inline error-message-inline" data-bind="validationMessage: url" style="display: none;"></div>
                    <input type="text" id="url" data-bind="value: url">
                </div>
            </div>
            -->
            <div class="control-group">
                <div class="help-inline error-message-inline" data-bind="validationMessage: source"
                     style="display: none;"></div>
                <!--<label class="control-label" for="comment">Комментарий</label>-->
                <div class="controls">
                    <textarea type="text" id="source" data-bind="text: source, disable: _readOnly" placeholder="Текст источника" style="width: 432px" rows="5">
                    </textarea>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <span class="pull-left"><input type="checkbox" checked></a> Создать следующую</span>
        <a href="#" class="btn" data-bind="click: cancel">Закрыть</a>
        <a href="#" class="btn btn-primary" data-bind="click: save">Сохранить</a>
    </div>
</div>

<!--
<script type="text/html" id="contrib-item-row-template">
    <tr data-bind="visible: !_isRemoved(), template: {name: displayMode, data: $data}, click: edit" class="row-input">
    </tr>
</script>

<script type="text/html" id="contrib-append-item-template">
    <td>
        <input type="text" class="input-large mousetrap" data-bind="autocompleteWithScheme: name_1,
            autocompleteOpts : {url: '/index', scheme : $root.scheme().name_1}" id="append_item_focus" />
    </td>
    <td>
        <input type="text" class="input-large mousetrap" data-bind="tageditWithScheme: relations, tageditOpts : {url: '/index', scheme : $root.scheme().relations}"/>
    </td>
    <td>
        <input type="text" class="input-large mousetrap" data-bind="autocompleteWithScheme: name_2,
            autocompleteOpts : {url: '/index', scheme : $root.scheme().name_2}"/>
    </td>
</script>

<script type="text/html" id="contrib-edit-item-template">
    <td>
        <input type="text" class="input-large edit-item-focus mousetrap" data-bind="autocomplete: name_1, autocompleteOpts : {url: '/names'}"
               data-bind-event="input-edit"/>
    </td>
    <td>
        <input type="text" class="input-small mousetrap"/>
    </td>
    <td>
        <input type="text" class="input-large mousetrap" data-bind="autocomplete: name_2, autocompleteOpts : {url: '/names'}"
               data-bind-event="input-edit"/>
    </td>
    <td>
        <div data-bind="ifnot: isValid()">
            <a href="#" data-bind="tooltip : errors">
                <button class="btn btn-mini btn-warning"><i class="icon-warning-sign"></i></button>
            </a>
        </div>
    </td>
</script>

<script type="text/html" id="contrib-item-template">
    <td>
        <span data-bind="text: name_1"></span>
    </td>
    <td>
        <span class="label label-info"></span>
    </td>
    <td>
        <span data-bind="text: name_2"></span>
    </td>
    <td>
        <button class="btn btn-mini btn-danger" data-bind="click: remove" data-bind-event="button-remove"><i class="icon-remove" data-bind-event="button-remove"></i></button>
    </td>
</script>

-->
