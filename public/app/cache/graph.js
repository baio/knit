// Generated by CoffeeScript 1.6.2
(function() {
  define(function() {
    var TTL;

    TTL = 1000 * 60 * 60 * 3;
    return {
      _getName: function(filter) {
        if (filter) {
          return "graph" + JSON.stringify(filter);
        } else {
          return "graph";
        }
      },
      _auth: function() {
        return true;
      },
      get: function(filter) {
        var d;

        if (filter.context !== "data") {
          console.log("g : " + filter.graph);
          d = $.jStorage.get(this._getName(filter.graph));
          if (d) {
            d = JSON.parse(d);
            if (d && d.auth !== _auth()) {
              d = null;
            }
          }
          return d;
        }
      },
      update: function(filter, data) {
        var _data;

        return;
        if (filter.context !== "data" && !data.isYours) {
          _data = JSON.stringify(data);
          console.log("u : " + filter.graph + " : " + data.ref);
          $.jStorage.set(this._getName(filter.graph), _data, {
            TTL: TTL
          });
          if (filter.graph !== data.ref) {
            data.auth = _auth();
            return $.jStorage.set(this._getName(data.ref), _data, {
              TTL: TTL
            });
          }
        }
      }
    };
  });

}).call(this);

/*
//@ sourceMappingURL=graph.map
*/
